<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nokia - Regency</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    body {
        box-sizing: border-box;
    }
    @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
    body {
        font-family: 'Kanit', sans-serif;
    }
    .cart-badge {
        animation: bounce 0.3s ease-in-out;
    }
    @keyframes bounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
    }
    .admin-tab-btn {
        color: #6b7280;
        background-color: transparent;
    }
    .admin-tab-btn.active {
        color: #1f2937;
        background-color: white;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    }
    .admin-tab-btn:hover:not(.active) {
        color: #374151;
        background-color: #f9fafb;
    }
</style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold">üõí Nokia - Regency</h1>
                    <span class="text-blue-200">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
                    <div class="hidden md:flex items-center bg-blue-700 rounded-lg px-4 py-2">
                        <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." class="bg-transparent text-white placeholder-blue-200 border-none outline-none w-64" onkeyup="searchProducts(event)">
                        <button onclick="performSearch()" class="text-blue-200 hover:text-white ml-2">üîç</button>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div id="userSection" class="hidden">
                        <button onclick="showOrders()" class="relative bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg transition-colors duration-200">
                            <span class="flex items-center space-x-2">
                                <span>üìã</span>
                                <span>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
                                <span id="ordersBadge" class="bg-red-500 text-white rounded-full px-2 py-1 text-sm font-bold hidden">0</span>
                            </span>
                        </button>

                        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏µ‡πÄ‡∏°‡∏• besurfeited1@gmail.com -->
                        <button data-admin onclick="showAdmin()" class="relative bg-purple-700 hover:bg-purple-800 px-4 py-2 rounded-lg transition-colors duration-200 hidden">
                            <span class="flex items-center space-x-2">
                                <span>üë®‚Äçüíº</span>
                                <span>‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</span>
                                <span id="adminBadge" class="bg-orange-500 text-white rounded-full px-2 py-1 text-sm font-bold hidden">0</span>
                            </span>
                        </button>

                        <button onclick="toggleCart()" class="relative bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg transition-colors duration-200">
                            <span class="flex items-center space-x-2">
                                <span>üõçÔ∏è</span>
                                <span>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</span>
                                <span id="cartCount" class="bg-red-500 text-white rounded-full px-2 py-1 text-sm font-bold">0</span>
                            </span>
                        </button>
                        <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors duration-200">
                            <span class="flex items-center space-x-2">
                                <span>üö™</span>
                                <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                            </span>
                        </button>
                    </div>
                    <div id="guestSection">
                        <button onclick="showLogin()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors duration-200">
                            <span class="flex items-center space-x-2">
                                <span>üë§</span>
                                <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <script>
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á UI ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        function showUserUI(email) {
            document.getElementById("guestSection").classList.add("hidden");
            document.getElementById("userSection").classList.remove("hidden");

            // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô
            const adminBtn = document.querySelector("[data-admin]");
            adminBtn.classList.add("hidden");

            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ß‡πà‡∏≤‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (email === "besurfeited1@gmail.com") {
                adminBtn.classList.remove("hidden");
            }
        }

        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        // showUserUI("besurfeited1@gmail.com"); // ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        // showUserUI("user@test.com"); // ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
    </script>


    <div class="container mx-auto px-4 py-6">
        <div class="grid lg:grid-cols-4 gap-6">
            <!-- Products Section -->
            <div class="lg:col-span-3">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
                
                <!-- Product Categories -->
                <div class="mb-6">
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <button onclick="filterProducts('all')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">üõí</span>
                            <span class="text-sm font-medium">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                        </button>
                        <button onclick="filterProducts('food')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">üçΩÔ∏è</span>
                            <span class="text-sm font-medium">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span>
                        </button>
                        <button onclick="filterProducts('drink')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">ü•§</span>
                            <span class="text-sm font-medium">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</span>
                        </button>
                        <button onclick="filterProducts('household')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">üè†</span>
                            <span class="text-sm font-medium">‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô</span>
                        </button>
                        <button onclick="filterProducts('frozen')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">üßä</span>
                            <span class="text-sm font-medium">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á</span>
                        </button>
                        <button onclick="filterProducts('seafood')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">ü¶ê</span>
                            <span class="text-sm font-medium">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•</span>
                        </button>
                        <button onclick="filterProducts('meat')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">ü•©</span>
                            <span class="text-sm font-medium">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå</span>
                        </button>
                        <button onclick="filterProducts('vegetables')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2">
                            <span class="text-2xl">ü•¨</span>
                            <span class="text-sm font-medium">‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ</span>
                        </button>
                    </div>
                </div>

                <!-- Products Grid -->
                <div id="productsGrid" class="grid md:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Products will be populated by JavaScript -->
                </div>
            </div>

            <!-- Cart Sidebar -->
            <div class="lg:col-span-1">
                <div id="cartSidebar" class="bg-white rounded-xl shadow-lg p-6 sticky top-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        üõçÔ∏è ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    </h3>
                    <div id="cartItems" class="space-y-3 mb-4">
                        <p class="text-gray-500 text-center py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                    </div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-4">
                            <span class="font-semibold">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                            <span id="totalPrice" class="text-xl font-bold text-blue-600">‡∏ø0</span>
                        </div>
                        <button id="checkoutBtn" onclick="showCheckout()" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 rounded-lg transition-colors duration-200 disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                            ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
                    <button onclick="closeCheckout()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>

                <!-- Order Summary -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div id="checkoutItems" class="space-y-2 mb-3">
                            <!-- Checkout items will be populated -->
                        </div>
                        <div class="border-t pt-3 flex justify-between font-bold text-lg">
                            <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                            <span id="checkoutTotal" class="text-blue-600">‡∏ø0</span>
                        </div>
                    </div>
                </div>

                <!-- Customer Information -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" id="customerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <input type="tel" id="customerPhone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <textarea id="customerAddress" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á" rows="3" class="w-full mt-4 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                </div>

                <!-- Payment Method -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="paymentMethod" value="cod" class="text-blue-600 focus:ring-blue-500">
                            <div class="flex-1">
                                <div class="font-medium">üíµ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (COD)</div>
                                <div class="text-sm text-gray-600">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>
                            </div>
                        </label>
                        <label class="flex items-center space-x-3 p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="paymentMethod" value="transfer" class="text-blue-600 focus:ring-blue-500">
                            <div class="flex-1">
                                <div class="font-medium">üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</div>
                                <div class="text-sm text-gray-600">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Bank Transfer Details (Hidden by default) -->
                <div id="bankDetails" class="mb-6 hidden">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h4>
                        <div class="text-sm text-blue-700 space-y-1">
                            <p><strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</strong> ‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</p>
                            <p><strong>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> 123-4-56789-0</p>
                            <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏°‡∏≤‡πÇ‡∏Ñ‡∏£‡∏°‡∏≤‡∏£‡πå‡∏ó ‡∏à‡∏≥‡∏Å‡∏±‡∏î</p>
                            <p class="text-red-600 font-medium mt-2">* ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button onclick="submitOrder()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 rounded-lg transition-colors duration-200">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                </button>
            </div>
        </div>
    </div>

    <!-- Orders Modal -->
    <div id="ordersModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                    <button onclick="closeOrders()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>

                <div id="ordersList" class="space-y-4">
                    <p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <button onclick="closeLogin()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>

            <form onsubmit="handleLogin(event)" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors duration-200">
                    ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-gray-600">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? 
                    <button onclick="showRegister()" class="text-blue-600 hover:text-blue-700 font-medium">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                <button onclick="closeRegister()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>

            <form onsubmit="handleRegister(event)" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠</label>
                        <input type="text" id="registerFirstName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏ä‡∏∑‡πà‡∏≠">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                        <input type="text" id="registerLastName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="registerEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                    <input type="tel" id="registerPhone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="registerPassword" required minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="registerConfirmPassword" required minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition-colors duration-200">
                    ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-gray-600">‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? 
                    <button onclick="showLogin()" class="text-blue-600 hover:text-blue-700 font-medium">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 text-center">
            <div class="text-6xl mb-4">‚úÖ</div>
            <h2 class="text-2xl font-bold text-green-600 mb-2">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
            <p class="text-gray-600 mb-4">‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß</p>
            <p class="text-sm text-gray-500 mb-6">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <span id="orderNumber" class="font-mono font-bold"></span></p>
            <button onclick="closeSuccess()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors duration-200">
                ‡∏ï‡∏Å‡∏•‡∏á
            </button>
        </div>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">üè™ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <button onclick="closeAdmin()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>

                <!-- Admin Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
                                <p id="pendingCount" class="text-2xl font-bold text-blue-800">0</p>
                            </div>
                            <div class="text-3xl">‚è≥</div>
                        </div>
                    </div>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-600 text-sm font-medium">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</p>
                                <p id="preparingCount" class="text-2xl font-bold text-yellow-800">0</p>
                            </div>
                            <div class="text-3xl">üë®‚Äçüç≥</div>
                        </div>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
                                <p id="shippingCount" class="text-2xl font-bold text-orange-800">0</p>
                            </div>
                            <div class="text-3xl">üöö</div>
                        </div>
                    </div>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</p>
                                <p id="completedCount" class="text-2xl font-bold text-green-800">0</p>
                            </div>
                            <div class="text-3xl">‚úÖ</div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-1 gap-4 mb-6">
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-red-600 text-sm font-medium">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß</p>
                                <p id="cancelledCount" class="text-2xl font-bold text-red-800">0</p>
                            </div>
                            <div class="text-3xl">‚ùå</div>
                        </div>
                    </div>
                </div>

                <!-- Order Status Tabs -->
                <div class="mb-6">
                    <div class="flex space-x-1 bg-gray-100 rounded-lg p-1">
                        <button onclick="filterAdminOrders('all')" class="admin-tab-btn active flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                        <button onclick="filterAdminOrders('pending')" class="admin-tab-btn flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
                        </button>
                        <button onclick="filterAdminOrders('preparing')" class="admin-tab-btn flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°
                        </button>
                        <button onclick="filterAdminOrders('shipping')" class="admin-tab-btn flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
                        </button>
                        <button onclick="filterAdminOrders('completed')" class="admin-tab-btn flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
                        </button>
                        <button onclick="filterAdminOrders('cancelled')" class="admin-tab-btn flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors duration-200">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß
                        </button>
                    </div>
                </div>

                <!-- Orders List -->
                <div id="adminOrdersList" class="space-y-4">
                    <p class="text-gray-500 text-center py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Status Update Confirmation Modal -->
    <div id="statusUpdateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-60 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 text-center">
            <div id="statusIcon" class="text-6xl mb-4">‚ùì</div>
            <h2 id="statusTitle" class="text-2xl font-bold mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h2>
            <p id="statusMessage" class="text-gray-600 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
            <div class="flex space-x-3">
                <button onclick="cancelStatusUpdate()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg transition-colors duration-200">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button onclick="confirmStatusUpdate()" id="confirmBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors duration-200">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample products data
        const products = [];

        // Function to get emoji based on category
        function getProductEmoji(category) {
            const emojiMap = {
                'frozen': 'üßä',
                'seafood': 'ü¶ê',
                'meat': 'ü•©',
                'vegetables': 'ü•¨',
                'food': 'üçΩÔ∏è',
                'drink': 'ü•§',
                'household': 'üè†'
            };
            return emojiMap[category] || 'üõí';
        }

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î
        const frozenProducts = [
            { id: 10, name: "‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/padkaprao.jpg", price: 120, category: 'frozen', description: '‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≤‡∏ô' },
            { id: 11, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/pizza.jpg", price: 150, category: 'frozen', description: '‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏µ‡∏™‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô' },
            { id: 12, name: "‡∏ã‡∏≤‡∏•‡∏≤‡πÄ‡∏õ‡∏≤‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/salapao.jpg", price: 60, category: 'frozen', description: '‡∏ã‡∏≤‡∏•‡∏≤‡πÄ‡∏õ‡∏≤‡πÑ‡∏™‡πâ‡∏´‡∏°‡∏π‡∏´‡∏ß‡∏≤‡∏ô' },
            { id: 13, name: "‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/friedchicken.jpg", price: 180, category: 'frozen', description: '‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å‡∏ô‡∏∏‡πà‡∏°‡πÉ‡∏ô' },
            { id: 14, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/friedrice.jpg", price: 50, category: 'frozen', description: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô' },
            { id: 15, name: "‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/mixedvegetables.jpg", price: 70, category: 'frozen', description: '‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á' },
            { id: 16, name: "‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/meatballs.jpg", price: 90, category: 'frozen', description: '‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ó‡πâ' },
            { id: 17, name: "‡∏õ‡∏•‡∏≤‡∏ó‡∏≠‡∏î‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/friedfish.jpg", price: 150, category: 'frozen', description: '‡∏õ‡∏•‡∏≤‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏≠‡∏°' },
            { id: 18, name: "‡πÅ‡∏Æ‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/hamburger.jpg", price: 160, category: 'frozen', description: '‡πÅ‡∏Æ‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ä‡∏±‡πâ‡∏ô‡∏î‡∏µ' },
            { id: 19, name: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏ö‡∏±‡∏ô‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/bun.jpg", price: 40, category: 'frozen', description: '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ô‡∏∏‡πà‡∏°‡∏´‡∏ß‡∏≤‡∏ô' },
            { id: 20, name: "‡∏ö‡∏±‡∏ß‡∏•‡∏≠‡∏¢‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/bualoy.jpg", price: 80, category: 'frozen', description: '‡∏ö‡∏±‡∏ß‡∏•‡∏≠‡∏¢‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô' },
            { id: 21, name: "‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/frenchfries.jpg", price: 70, category: 'frozen', description: '‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå‡∏Å‡∏£‡∏≠‡∏ö‡∏≠‡∏£‡πà‡∏≠‡∏¢' },
            { id: 22, name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏¥‡∏ô‡∏¥‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á", image: "./images/minipizza.jpg", price: 90, category: 'frozen', description: '‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏°‡∏¥‡∏ô‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏°‡∏π' }
        ];

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•
        const seafoodProducts = [
            { id: 23, name: "‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î", image: "./images/shrimp.jpg", price: 200, category: 'seafood', description: '‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡∏ó‡∏∞‡πÄ‡∏•' },
            { id: 24, name: "‡∏õ‡∏π‡∏°‡πâ‡∏≤", image: "./images/crab.jpg", price: 350, category: 'seafood', description: '‡∏õ‡∏π‡∏°‡πâ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡∏∏‡πà‡∏°' },
            { id: 25, name: "‡∏´‡∏°‡∏∂‡∏Å‡∏´‡∏±‡πà‡∏ô‡∏ß‡∏á‡πÅ‡∏ä‡πà", image: "./images/squid.jpg", price: 180, category: 'seafood', description: '‡∏´‡∏°‡∏∂‡∏Å‡∏´‡∏±‡πà‡∏ô‡∏ß‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏∏‡∏á' },
            { id: 26, name: "‡∏´‡∏≠‡∏¢‡πÅ‡∏°‡∏•‡∏á‡∏†‡∏π‡πà", image: "./images/mussel.jpg", price: 120, category: 'seafood', description: '‡∏´‡∏≠‡∏¢‡πÅ‡∏°‡∏•‡∏á‡∏†‡∏π‡πà‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 27, name: "‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô", image: "./images/salmon.jpg", price: 400, category: 'seafood', description: '‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°' },
            { id: 28, name: "‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡∏ö‡πä‡∏ß‡∏¢", image: "./images/shrimppreserved.jpg", price: 250, category: 'seafood', description: '‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡∏ö‡πä‡∏ß‡∏¢‡∏£‡∏™‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô' },
            { id: 29, name: "‡∏õ‡∏π‡∏≠‡∏±‡∏î", image: "./images/crabstick.jpg", price: 100, category: 'seafood', description: '‡∏õ‡∏π‡∏≠‡∏±‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ô‡πà‡∏ô' },
            { id: 30, name: "‡∏õ‡∏•‡∏≤‡∏ó‡∏π‡∏ô‡πà‡∏≤", image: "./images/tuna.jpg", price: 300, category: 'seafood', description: '‡∏õ‡∏•‡∏≤‡∏ó‡∏π‡∏ô‡πà‡∏≤‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 31, name: "‡∏´‡∏≠‡∏¢‡∏ô‡∏≤‡∏á‡∏£‡∏°", image: "./images/oyster.jpg", price: 200, category: 'seafood', description: '‡∏´‡∏≠‡∏¢‡∏ô‡∏≤‡∏á‡∏£‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏ß‡∏≤‡∏ô' },
            { id: 32, name: "‡∏õ‡∏•‡∏≤‡πÄ‡∏Å‡πã‡∏≤", image: "./images/seabass.jpg", price: 280, category: 'seafood', description: '‡∏õ‡∏•‡∏≤‡πÄ‡∏Å‡πã‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏ß' },
            { id: 33, name: "‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥", image: "./images/riverprawn.jpg", price: 450, category: 'seafood', description: '‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà' },
            { id: 34, name: "‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å‡∏Å‡∏£‡∏≠‡∏ö", image: "./images/crispysquid.jpg", price: 150, category: 'seafood', description: '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å‡∏Å‡∏£‡∏≠‡∏ö‡∏≠‡∏£‡πà‡∏≠‡∏¢' },
            { id: 35, name: "‡∏´‡∏≠‡∏¢‡∏´‡∏ß‡∏≤‡∏ô", image: "./images/clam.jpg", price: 100, category: 'seafood', description: '‡∏´‡∏≠‡∏¢‡∏´‡∏ß‡∏≤‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ô‡∏∏‡πà‡∏°' }
        ];

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå
        const meatProducts = [
            { id: 36, name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏™‡πÑ‡∏•‡∏ã‡πå", image: "./images/beefslice.jpg", price: 500, category: 'meat', description: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏™‡πÑ‡∏•‡∏ã‡πå‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ' },
            { id: 37, name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡πÑ‡∏•‡∏ã‡πå", image: "./images/porkslice.jpg", price: 250, category: 'meat', description: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏™‡πÑ‡∏•‡∏ã‡πå‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 38, name: "‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏™‡πÑ‡∏õ‡∏ã‡∏µ‡πà", image: "./images/chickensteak.jpg", price: 150, category: 'meat', description: '‡∏™‡πÄ‡∏ï‡πá‡∏Å‡πÑ‡∏Å‡πà‡∏£‡∏™‡πÄ‡∏ú‡πá‡∏î' },
            { id: 39, name: "‡∏´‡∏°‡∏π‡∏ö‡∏î", image: "./images/groundpork.jpg", price: 180, category: 'meat', description: '‡∏´‡∏°‡∏π‡∏ö‡∏î‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 40, name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ö‡∏î", image: "./images/groundbeef.jpg", price: 300, category: 'meat', description: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ö‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ' },
            { id: 41, name: "‡πÑ‡∏Å‡πà‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ô", image: "./images/wholechicken.jpg", price: 350, category: 'meat', description: '‡πÑ‡∏Å‡πà‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 42, name: "‡∏ã‡∏µ‡πà‡πÇ‡∏Ñ‡∏£‡∏á‡∏´‡∏°‡∏π", image: "./images/porkribs.jpg", price: 400, category: 'meat', description: '‡∏ã‡∏µ‡πà‡πÇ‡∏Ñ‡∏£‡∏á‡∏´‡∏°‡∏π‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏ß‡∏≤‡∏ô' },
            { id: 43, name: "‡∏™‡∏±‡∏ô‡∏Ñ‡∏≠‡∏´‡∏°‡∏π", image: "./images/porkneck.jpg", price: 220, category: 'meat', description: '‡∏™‡∏±‡∏ô‡∏Ñ‡∏≠‡∏´‡∏°‡∏π‡∏ô‡∏∏‡πà‡∏°‡∏´‡∏ß‡∏≤‡∏ô' },
            { id: 44, name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ô‡πÉ‡∏ô", image: "./images/tenderloin.jpg", price: 450, category: 'meat', description: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°' },
            { id: 45, name: "‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡∏ß‡∏±‡∏ß‡∏™‡πÑ‡∏•‡∏ã‡πå", image: "./images/beefthigh.jpg", price: 295, category: 'meat', description: '‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡∏ß‡∏±‡∏ß‡∏™‡πÑ‡∏•‡∏ã‡πå‡∏ô‡∏∏‡πà‡∏°' },
            { id: 46, name: "‡∏≠‡∏Å‡πÑ‡∏Å‡πà", image: "./images/chickenbreast.jpg", price: 299, category: 'meat', description: '‡∏≠‡∏Å‡πÑ‡∏Å‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏ß‡∏ô‡∏∏‡πà‡∏°' },
            { id: 47, name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ô‡πà‡∏≠‡∏á‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡∏ö‡∏î", image: "./images/groundbeefthigh.jpg", price: 1176, category: 'meat', description: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ô‡πà‡∏≠‡∏á‡∏™‡∏∞‡πÇ‡∏û‡∏Å‡∏ö‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ' },
            { id: 48, name: "‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà", image: "./images/chickenwings.jpg", price: 369, category: 'meat', description: '‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' }
        ];

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ
        const vegProducts = [
            { id: 49, name: "‡∏Å‡∏∞‡∏´‡∏•‡πà‡∏≥‡∏õ‡∏•‡∏µ", image: "./images/cabbage.jpg", price: 16, category: 'vegetables', description: '‡∏Å‡∏∞‡∏´‡∏•‡πà‡∏≥‡∏õ‡∏•‡∏µ‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà' },
            { id: 50, name: "‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á", image: "./images/waterspinach.jpg", price: 49, category: 'vegetables', description: '‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á‡∏™‡∏î‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß' },
            { id: 51, name: "‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤", image: "./images/kale.jpg", price: 35, category: 'vegetables', description: '‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î' },
            { id: 52, name: "‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", image: "./images/carrot.jpg", price: 52, category: 'vegetables', description: '‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó‡∏´‡∏ß‡∏≤‡∏ô‡∏Å‡∏£‡∏≠‡∏ö' },
            { id: 53, name: "‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®", image: "./images/tomato.jpg", price: 69, category: 'vegetables', description: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏î' },
            { id: 54, name: "‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°", image: "./images/lettuce.jpg", price: 30, category: 'vegetables', description: '‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß' },
            { id: 55, name: "‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á", image: "./images/pumpkin.jpg", price: 45, category: 'vegetables', description: '‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô‡∏´‡∏≠‡∏°' },
            { id: 56, name: "‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤", image: "./images/cucumber.jpg", price: 20, category: 'vegetables', description: '‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏î' },
            { id: 57, name: "‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á", image: "./images/mango.jpg", price: 50, category: 'vegetables', description: '‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á‡∏´‡∏ß‡∏≤‡∏ô‡∏´‡∏≠‡∏°' },
            { id: 58, name: "‡∏™‡πâ‡∏°", image: "./images/orange.jpg", price: 69, category: 'vegetables', description: '‡∏™‡πâ‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡∏â‡πà‡∏≥‡∏ô‡πâ‡∏≥' },
            { id: 59, name: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢", image: "./images/banana.jpg", price: 25, category: 'vegetables', description: '‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏ß‡∏≤‡∏ô‡∏´‡∏≠‡∏°' },
            { id: 60, name: "‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡πÇ‡∏ã‡∏•‡∏π‡∏ô‡πà‡∏≤", image: "./images/apple.jpg", price: 109, category: 'vegetables', description: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡∏´‡∏ß‡∏≤‡∏ô‡∏Å‡∏£‡∏≠‡∏ö' },
            { id: 61, name: "‡∏≠‡∏á‡∏∏‡πà‡∏ô", image: "./images/grape.jpg", price: 55, category: 'vegetables', description: '‡∏≠‡∏á‡∏∏‡πà‡∏ô‡∏´‡∏ß‡∏≤‡∏ô‡∏â‡πà‡∏≥' }
        ];

        // ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        const allProducts = [...products, ...frozenProducts, ...seafoodProducts, ...meatProducts, ...vegProducts];

        let cart = [];
        let currentFilter = 'all';
        let orders = JSON.parse(localStorage.getItem('makroOrders') || '[]');
        let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
        let users = JSON.parse(localStorage.getItem('makroUsers') || '[]');
        let currentAdminFilter = 'all';
        let pendingStatusUpdate = null;

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const filteredProducts = currentFilter === 'all' ? allProducts : allProducts.filter(p => p.category === currentFilter);
            
            grid.innerHTML = filteredProducts.map(product => `
                <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                    <div class="p-6">
                        <div class="w-full h-40 bg-gray-100 rounded-lg mb-4 overflow-hidden">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center" style="display: none;">
                                <span class="text-6xl">${getProductEmoji(product.category)}</span>
                            </div>
                        </div>
                        <h3 class="font-semibold text-lg text-gray-800 mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-4">${product.description}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-2xl font-bold text-blue-600">‡∏ø${product.price}</span>
                            <button onclick="addToCart(${product.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                <span>üõí</span>
                                <span>‡πÄ‡∏û‡∏¥‡πà‡∏°</span>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterProducts(category) {
            currentFilter = category;
            renderProducts();
            
            // Update button styles
            document.querySelectorAll('button[onclick^="filterProducts"]').forEach(btn => {
                btn.className = 'bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2';
            });
            
            // Find and update the clicked button
            const buttons = document.querySelectorAll('button[onclick^="filterProducts"]');
            buttons.forEach(btn => {
                if (btn.getAttribute('onclick') === `filterProducts('${category}')`) {
                    btn.className = 'bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2';
                }
            });
        }

        function addToCart(productId) {
            const product = allProducts.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            updateCartDisplay();
            
            // Add bounce animation to cart button
            const cartCount = document.getElementById('cartCount');
            cartCount.classList.add('cart-badge');
            setTimeout(() => cartCount.classList.remove('cart-badge'), 300);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartDisplay();
                }
            }
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const totalPrice = document.getElementById('totalPrice');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            totalPrice.textContent = `‡∏ø${total.toLocaleString()}`;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>';
                checkoutBtn.disabled = true;
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center">
                            <span class="text-xl">${getProductEmoji(item.category)}</span>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-sm">${item.name}</div>
                            <div class="text-blue-600 font-semibold">‡∏ø${item.price}</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity(${item.id}, -1)" class="bg-red-500 hover:bg-red-600 text-white w-6 h-6 rounded-full text-sm">-</button>
                            <span class="font-semibold">${item.quantity}</span>
                            <button onclick="updateQuantity(${item.id}, 1)" class="bg-green-500 hover:bg-green-600 text-white w-6 h-6 rounded-full text-sm">+</button>
                        </div>
                        <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">üóëÔ∏è</button>
                    </div>
                `).join('');
                checkoutBtn.disabled = false;
            }
        }

        function toggleCart() {
            // This function can be used to show/hide cart on mobile
            const sidebar = document.getElementById('cartSidebar');
            sidebar.scrollIntoView({ behavior: 'smooth' });
        }

        function showCheckout() {
            if (cart.length === 0) return;
            
            const modal = document.getElementById('checkoutModal');
            const checkoutItems = document.getElementById('checkoutItems');
            const checkoutTotal = document.getElementById('checkoutTotal');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            checkoutItems.innerHTML = cart.map(item => `
                <div class="flex justify-between items-center">
                    <span>${item.name} x${item.quantity}</span>
                    <span>‡∏ø${(item.price * item.quantity).toLocaleString()}</span>
                </div>
            `).join('');
            
            checkoutTotal.textContent = `‡∏ø${total.toLocaleString()}`;
            modal.classList.remove('hidden');
            
            // Add payment method change listener
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const bankDetails = document.getElementById('bankDetails');
                    if (this.value === 'transfer') {
                        bankDetails.classList.remove('hidden');
                    } else {
                        bankDetails.classList.add('hidden');
                    }
                });
            });
        }

        function closeCheckout() {
            document.getElementById('checkoutModal').classList.add('hidden');
        }

        function submitOrder() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const address = document.getElementById('customerAddress').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!name || !phone || !address || !paymentMethod) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            // Generate order number
            const orderNumber = 'MK' + Date.now().toString().slice(-8);
            document.getElementById('orderNumber').textContent = orderNumber;
            
            // Calculate total
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            // Create order object
            const order = {
                orderNumber: orderNumber,
                date: new Date().toLocaleString('th-TH'),
                customerName: name,
                customerPhone: phone,
                customerAddress: address,
                paymentMethod: paymentMethod.value,
                items: [...cart],
                total: total
            };
            
            // Save order to localStorage
            orders.unshift(order); // Add to beginning of array
            localStorage.setItem('makroOrders', JSON.stringify(orders));
            
            // Clear cart
            cart = [];
            updateCartDisplay();
            
            // Show success modal
            closeCheckout();
            document.getElementById('successModal').classList.remove('hidden');
        }

        function closeSuccess() {
            document.getElementById('successModal').classList.add('hidden');
            
            // Reset form
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerAddress').value = '';
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => radio.checked = false);
            document.getElementById('bankDetails').classList.add('hidden');
        }

        function showOrders() {
            const modal = document.getElementById('ordersModal');
            const ordersList = document.getElementById('ordersList');
            
            if (orders.length === 0) {
                ordersList.innerHTML = '<p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>';
            } else {
                ordersList.innerHTML = orders.map(order => `
                    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${order.orderNumber}</h3>
                                <p class="text-sm text-gray-600">${order.date}</p>
                                <p class="text-sm text-gray-600">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${order.customerName}</p>
                                <p class="text-sm text-gray-600">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${order.customerPhone}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-blue-600">‡∏ø${order.total.toLocaleString()}</div>
                                <div class="text-sm ${order.paymentMethod === 'cod' ? 'text-orange-600' : 'text-green-600'} font-medium">
                                    ${order.paymentMethod === 'cod' ? 'üíµ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' : 'üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£'}
                                </div>
                                <div class="text-sm ${order.status === 'cancelled' ? 'text-red-600' : 'text-green-600'} font-medium mt-1">
                                    ${order.status === 'cancelled' ? '‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß' : '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß'}
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <h4 class="font-medium text-gray-800 mb-3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</h4>
                            <div class="grid md:grid-cols-2 gap-3">
                                ${order.items.map(item => `
                                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center">
                                            <span class="text-xl">${getProductEmoji(item.category)}</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-medium text-sm">${item.name}</div>
                                            <div class="text-gray-600 text-sm">‡∏ø${item.price} x ${item.quantity}</div>
                                        </div>
                                        <div class="text-blue-600 font-semibold">‡∏ø${(item.price * item.quantity).toLocaleString()}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="border-t pt-4 mt-4">
                            <div class="text-sm text-gray-600">
                                <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</strong><br>
                                ${order.customerAddress}
                            </div>
                        </div>
                        
                        ${order.status === 'pending' ? `
                            <div class="border-t pt-4 mt-4">
                                <button onclick="cancelOrderCustomer('${order.orderNumber}')" 
                                        class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                    <span>‚ùå</span>
                                    <span>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
                                </button>
                            </div>
                        ` : order.status === 'cancelled' ? `
                            <div class="border-t pt-4 mt-4">
                                <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 text-red-700">
                                        <span>‚ùå</span>
                                        <span class="font-medium">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß</span>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
            
            modal.classList.remove('hidden');
        }

        function closeOrders() {
            document.getElementById('ordersModal').classList.add('hidden');
        }

        // Authentication functions
        function showLogin() {
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function closeLogin() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        function showRegister() {
            closeLogin();
            document.getElementById('registerModal').classList.remove('hidden');
        }

        function closeRegister() {
            document.getElementById('registerModal').classList.add('hidden');
        }

        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUserInterface();
                closeLogin();
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                alert('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            } else {
                alert('‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
        }

        function handleRegister(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('registerFirstName').value;
            const lastName = document.getElementById('registerLastName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô');
                return;
            }
            
            if (users.find(u => u.email === email)) {
                alert('‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            const newUser = {
                id: Date.now(),
                firstName,
                lastName,
                email,
                phone,
                password,
                registeredAt: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('makroUsers', JSON.stringify(users));
            
            // Auto login after registration
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserInterface();
            closeRegister();
            
            // Clear form
            document.getElementById('registerFirstName').value = '';
            document.getElementById('registerLastName').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPhone').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirmPassword').value = '';
            
            alert('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserInterface();
            
            // Clear cart and orders
            cart = [];
            updateCartDisplay();
            
            alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
        }

        function updateUserInterface() {
            const userSection = document.getElementById('userSection');
            const guestSection = document.getElementById('guestSection');
            const ordersBadge = document.getElementById('ordersBadge');
            
            if (currentUser) {
                userSection.classList.remove('hidden');
                guestSection.classList.add('hidden');
                
                // Update orders badge
                const userOrders = orders.filter(order => order.userId === currentUser.id);
                if (userOrders.length > 0) {
                    ordersBadge.textContent = userOrders.length;
                    ordersBadge.classList.remove('hidden');
                } else {
                    ordersBadge.classList.add('hidden');
                }
            } else {
                userSection.classList.add('hidden');
                guestSection.classList.remove('hidden');
            }
        }

        function showCheckout() {
            if (!currentUser) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠');
                showLogin();
                return;
            }
            
            if (cart.length === 0) return;
            
            const modal = document.getElementById('checkoutModal');
            const checkoutItems = document.getElementById('checkoutItems');
            const checkoutTotal = document.getElementById('checkoutTotal');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            checkoutItems.innerHTML = cart.map(item => `
                <div class="flex justify-between items-center">
                    <span>${item.name} x${item.quantity}</span>
                    <span>‡∏ø${(item.price * item.quantity).toLocaleString()}</span>
                </div>
            `).join('');
            
            checkoutTotal.textContent = `‡∏ø${total.toLocaleString()}`;
            
            // Pre-fill user information
            document.getElementById('customerName').value = `${currentUser.firstName} ${currentUser.lastName}`;
            document.getElementById('customerPhone').value = currentUser.phone;
            
            modal.classList.remove('hidden');
            
            // Add payment method change listener
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const bankDetails = document.getElementById('bankDetails');
                    if (this.value === 'transfer') {
                        bankDetails.classList.remove('hidden');
                    } else {
                        bankDetails.classList.add('hidden');
                    }
                });
            });
        }

        function showOrders() {
            if (!currentUser) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô');
                showLogin();
                return;
            }
            
            const modal = document.getElementById('ordersModal');
            const ordersList = document.getElementById('ordersList');
            
            // Filter orders for current user
            const userOrders = orders.filter(order => order.userId === currentUser.id);
            
            if (userOrders.length === 0) {
                ordersList.innerHTML = '<p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>';
            } else {
                ordersList.innerHTML = userOrders.map(order => `
                    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${order.orderNumber}</h3>
                                <p class="text-sm text-gray-600">${order.date}</p>
                                <p class="text-sm text-gray-600">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${order.customerName}</p>
                                <p class="text-sm text-gray-600">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${order.customerPhone}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-blue-600">‡∏ø${order.total.toLocaleString()}</div>
                                <div class="text-sm ${order.paymentMethod === 'cod' ? 'text-orange-600' : 'text-green-600'} font-medium">
                                    ${order.paymentMethod === 'cod' ? 'üíµ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' : 'üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£'}
                                </div>
                                <div class="text-sm ${order.status === 'cancelled' ? 'text-red-600' : 'text-green-600'} font-medium mt-1">
                                    ${order.status === 'cancelled' ? '‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß' : '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß'}
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <h4 class="font-medium text-gray-800 mb-3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</h4>
                            <div class="grid md:grid-cols-2 gap-3">
                                ${order.items.map(item => `
                                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center">
                                            <span class="text-xl">${getProductEmoji(item.category)}</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-medium text-sm">${item.name}</div>
                                            <div class="text-gray-600 text-sm">‡∏ø${item.price} x ${item.quantity}</div>
                                        </div>
                                        <div class="text-blue-600 font-semibold">‡∏ø${(item.price * item.quantity).toLocaleString()}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="border-t pt-4 mt-4">
                            <div class="text-sm text-gray-600">
                                <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</strong><br>
                                ${order.customerAddress}
                            </div>
                        </div>
                        
                        ${order.status === 'pending' ? `
                            <div class="border-t pt-4 mt-4">
                                <button onclick="cancelOrderCustomer('${order.orderNumber}')" 
                                        class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                    <span>‚ùå</span>
                                    <span>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
                                </button>
                            </div>
                        ` : order.status === 'cancelled' ? `
                            <div class="border-t pt-4 mt-4">
                                <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 text-red-700">
                                        <span>‚ùå</span>
                                        <span class="font-medium">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß</span>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
            
            modal.classList.remove('hidden');
        }

        // Update submitOrder function to include userId
        function submitOrder() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const address = document.getElementById('customerAddress').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!name || !phone || !address || !paymentMethod) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            // Generate order number
            const orderNumber = 'MK' + Date.now().toString().slice(-8);
            document.getElementById('orderNumber').textContent = orderNumber;
            
            // Calculate total
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            // Create order object
            const order = {
                orderNumber: orderNumber,
                date: new Date().toLocaleString('th-TH'),
                customerName: name,
                customerPhone: phone,
                customerAddress: address,
                paymentMethod: paymentMethod.value,
                items: [...cart],
                total: total,
                userId: currentUser.id,
                status: 'pending',
                statusHistory: [
                    {
                        status: 'pending',
                        timestamp: new Date().toISOString(),
                        note: '‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß'
                    }
                ]
            };
            
            // Save order to localStorage
            orders.unshift(order); // Add to beginning of array
            localStorage.setItem('makroOrders', JSON.stringify(orders));
            
            // Clear cart
            cart = [];
            updateCartDisplay();
            updateUserInterface(); // Update badge
            
            // Show success modal
            closeCheckout();
            document.getElementById('successModal').classList.remove('hidden');
        }

        // Search functions
        function searchProducts(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (searchTerm === '') {
                currentFilter = 'all';
                renderProducts();
                return;
            }
            
            const grid = document.getElementById('productsGrid');
            const filteredProducts = allProducts.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm)
            );
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4">üîç</div>
                        <h3 class="text-xl font-semibold text-gray-600 mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
                        <p class="text-gray-500">‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
                    </div>
                `;
            } else {
                grid.innerHTML = filteredProducts.map(product => `
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                        <div class="p-6">
                            <div class="w-full h-40 bg-gray-100 rounded-lg mb-4 overflow-hidden">
                                <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center" style="display: none;">
                                    <span class="text-6xl">${getProductEmoji(product.category)}</span>
                                </div>
                            </div>
                            <h3 class="font-semibold text-lg text-gray-800 mb-2">${product.name}</h3>
                            <p class="text-gray-600 text-sm mb-4">${product.description}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-blue-600">‡∏ø${product.price}</span>
                                <button onclick="addToCart(${product.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                    <span>üõí</span>
                                    <span>‡πÄ‡∏û‡∏¥‡πà‡∏°</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Reset category buttons
            document.querySelectorAll('button[onclick^="filterProducts"]').forEach(btn => {
                btn.className = 'bg-gray-200 hover:bg-gray-300 text-gray-700 p-4 rounded-xl transition-colors duration-200 flex flex-col items-center space-y-2';
            });
        }

        // Admin functions
        function showAdmin() {
            const modal = document.getElementById('adminModal');
            updateAdminStats();
            renderAdminOrders();
            modal.classList.remove('hidden');
        }

        function closeAdmin() {
            document.getElementById('adminModal').classList.add('hidden');
        }

        function updateAdminStats() {
            const pendingOrders = orders.filter(order => order.status === 'pending');
            const preparingOrders = orders.filter(order => order.status === 'preparing');
            const shippingOrders = orders.filter(order => order.status === 'shipping');
            const completedOrders = orders.filter(order => order.status === 'completed');
            const cancelledOrders = orders.filter(order => order.status === 'cancelled');

            document.getElementById('pendingCount').textContent = pendingOrders.length;
            document.getElementById('preparingCount').textContent = preparingOrders.length;
            document.getElementById('shippingCount').textContent = shippingOrders.length;
            document.getElementById('completedCount').textContent = completedOrders.length;
            document.getElementById('cancelledCount').textContent = cancelledOrders.length;

            // Update admin badge
            const adminBadge = document.getElementById('adminBadge');
            const pendingCount = pendingOrders.length + preparingOrders.length + shippingOrders.length;
            if (pendingCount > 0) {
                adminBadge.textContent = pendingCount;
                adminBadge.classList.remove('hidden');
            } else {
                adminBadge.classList.add('hidden');
            }
        }

        function filterAdminOrders(status) {
            currentAdminFilter = status;
            renderAdminOrders();
            
            // Update tab styles
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function renderAdminOrders() {
            const ordersList = document.getElementById('adminOrdersList');
            let filteredOrders = orders;
            
            if (currentAdminFilter !== 'all') {
                filteredOrders = orders.filter(order => order.status === currentAdminFilter);
            }
            
            if (filteredOrders.length === 0) {
                ordersList.innerHTML = '<p class="text-gray-500 text-center py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ</p>';
                return;
            }
            
            ordersList.innerHTML = filteredOrders.map(order => {
                const statusConfig = getStatusConfig(order.status);
                const nextStatus = getNextStatus(order.status);
                
                return `
                    <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${order.orderNumber}</h3>
                                <p class="text-sm text-gray-600">${order.date}</p>
                                <p class="text-sm text-gray-600">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${order.customerName}</p>
                                <p class="text-sm text-gray-600">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${order.customerPhone}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-blue-600">‡∏ø${order.total.toLocaleString()}</div>
                                <div class="text-sm ${order.paymentMethod === 'cod' ? 'text-orange-600' : 'text-green-600'} font-medium">
                                    ${order.paymentMethod === 'cod' ? 'üíµ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' : 'üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£'}
                                </div>
                                <div class="flex items-center space-x-2 mt-2">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${statusConfig.bgColor} ${statusConfig.textColor}">
                                        ${statusConfig.icon} ${statusConfig.text}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4 mb-4">
                            <h4 class="font-medium text-gray-800 mb-3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</h4>
                            <div class="grid md:grid-cols-2 gap-3">
                                ${order.items.map(item => `
                                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center">
                                            <span class="text-xl">${getProductEmoji(item.category)}</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-medium text-sm">${item.name}</div>
                                            <div class="text-gray-600 text-sm">‡∏ø${item.price} x ${item.quantity}</div>
                                        </div>
                                        <div class="text-blue-600 font-semibold">‡∏ø${(item.price * item.quantity).toLocaleString()}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="border-t pt-4 mb-4">
                            <div class="text-sm text-gray-600">
                                <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</strong><br>
                                ${order.customerAddress}
                            </div>
                        </div>
                        
                        ${order.status !== 'completed' && order.status !== 'cancelled' ? `
                            <div class="border-t pt-4 flex justify-between">
                                <button onclick="cancelOrderAdmin('${order.orderNumber}')" 
                                        class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                    <span>‚ùå</span>
                                    <span>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
                                </button>
                                <div class="flex space-x-3">
                                    ${nextStatus ? `
                                        <button onclick="updateOrderStatus('${order.orderNumber}', '${nextStatus.status}')" 
                                                class="bg-${nextStatus.color}-600 hover:bg-${nextStatus.color}-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2">
                                            <span>${nextStatus.icon}</span>
                                            <span>${nextStatus.text}</span>
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        ` : order.status === 'cancelled' ? `
                            <div class="border-t pt-4">
                                <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                                    <div class="flex items-center space-x-2 text-red-700">
                                        <span>‚ùå</span>
                                        <span class="font-medium">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß</span>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function getStatusConfig(status) {
            const configs = {
                'pending': {
                    icon: '‚è≥',
                    text: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                    bgColor: 'bg-blue-100',
                    textColor: 'text-blue-800'
                },
                'preparing': {
                    icon: 'üë®‚Äçüç≥',
                    text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°',
                    bgColor: 'bg-yellow-100',
                    textColor: 'text-yellow-800'
                },
                'shipping': {
                    icon: 'üöö',
                    text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á',
                    bgColor: 'bg-orange-100',
                    textColor: 'text-orange-800'
                },
                'completed': {
                    icon: '‚úÖ',
                    text: '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                    bgColor: 'bg-green-100',
                    textColor: 'text-green-800'
                },
                'cancelled': {
                    icon: '‚ùå',
                    text: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß',
                    bgColor: 'bg-red-100',
                    textColor: 'text-red-800'
                }
            };
            return configs[status] || configs['pending'];
        }

        function getNextStatus(currentStatus) {
            const statusFlow = {
                'pending': { status: 'preparing', text: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤', icon: 'üë®‚Äçüç≥', color: 'yellow' },
                'preparing': { status: 'shipping', text: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏î‡∏™‡πà‡∏á', icon: 'üöö', color: 'orange' },
                'shipping': { status: 'completed', text: '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', icon: '‚úÖ', color: 'green' }
            };
            return statusFlow[currentStatus] || null;
        }

        function updateOrderStatus(orderNumber, newStatus) {
            const order = orders.find(o => o.orderNumber === orderNumber);
            if (!order) return;
            
            const statusConfig = getStatusConfig(newStatus);
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusMessage = document.getElementById('statusMessage');
            const confirmBtn = document.getElementById('confirmBtn');
            
            statusIcon.textContent = statusConfig.icon;
            statusTitle.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞';
            statusMessage.textContent = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${orderNumber} ‡πÄ‡∏õ‡πá‡∏ô "${statusConfig.text}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`;
            
            // Set button color based on status
            const colorMap = {
                'preparing': 'bg-yellow-600 hover:bg-yellow-700',
                'shipping': 'bg-orange-600 hover:bg-orange-700',
                'completed': 'bg-green-600 hover:bg-green-700'
            };
            confirmBtn.className = `flex-1 ${colorMap[newStatus] || 'bg-blue-600 hover:bg-blue-700'} text-white py-2 px-4 rounded-lg transition-colors duration-200`;
            
            pendingStatusUpdate = { orderNumber, newStatus };
            document.getElementById('statusUpdateModal').classList.remove('hidden');
        }

        function confirmStatusUpdate() {
            if (!pendingStatusUpdate) return;
            
            const { orderNumber, newStatus } = pendingStatusUpdate;
            const order = orders.find(o => o.orderNumber === orderNumber);
            
            if (order) {
                order.status = newStatus;
                order.statusHistory.push({
                    status: newStatus,
                    timestamp: new Date().toISOString(),
                    note: newStatus === 'cancelled' ? '‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : getStatusConfig(newStatus).text
                });
                
                localStorage.setItem('makroOrders', JSON.stringify(orders));
                updateAdminStats();
                renderAdminOrders();
                updateUserInterface(); // Update user interface badges
                
                // Refresh orders modal if it's open
                const ordersModal = document.getElementById('ordersModal');
                if (!ordersModal.classList.contains('hidden')) {
                    showOrders();
                }
            }
            
            cancelStatusUpdate();
        }

        function cancelStatusUpdate() {
            pendingStatusUpdate = null;
            document.getElementById('statusUpdateModal').classList.add('hidden');
        }

        function cancelOrderCustomer(orderNumber) {
            const order = orders.find(o => o.orderNumber === orderNumber);
            if (!order) return;
            
            // ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"
            if (order.status !== 'pending') {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusMessage = document.getElementById('statusMessage');
            const confirmBtn = document.getElementById('confirmBtn');
            
            statusIcon.textContent = '‚ùå';
            statusTitle.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠';
            statusMessage.textContent = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${orderNumber} ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`;
            
            confirmBtn.className = 'flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors duration-200';
            
            pendingStatusUpdate = { orderNumber, newStatus: 'cancelled' };
            document.getElementById('statusUpdateModal').classList.remove('hidden');
        }

        function cancelOrderAdmin(orderNumber) {
            const order = orders.find(o => o.orderNumber === orderNumber);
            if (!order) return;
            
            // ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
            if (order.status === 'completed') {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusMessage = document.getElementById('statusMessage');
            const confirmBtn = document.getElementById('confirmBtn');
            
            statusIcon.textContent = '‚ùå';
            statusTitle.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô)';
            statusMessage.textContent = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${orderNumber} ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`;
            
            confirmBtn.className = 'flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors duration-200';
            
            pendingStatusUpdate = { orderNumber, newStatus: 'cancelled' };
            document.getElementById('statusUpdateModal').classList.remove('hidden');
        }

        // Initialize existing orders with status if they don't have one
        function initializeOrderStatuses() {
            let updated = false;
            orders.forEach(order => {
                if (!order.status) {
                    order.status = 'completed'; // Set old orders as completed
                    order.statusHistory = [
                        {
                            status: 'completed',
                            timestamp: new Date().toISOString(),
                            note: '‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡πà‡∏≤ - ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß'
                        }
                    ];
                    updated = true;
                }
            });
            
            if (updated) {
                localStorage.setItem('makroOrders', JSON.stringify(orders));
            }
        }

        // Initialize the page
        initializeOrderStatuses();
        renderProducts();
        updateCartDisplay();
        updateUserInterface();
        
        // Initialize admin stats
        if (currentUser) {
            updateAdminStats();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987611f543de8957',t:'MTc1OTI1OTk0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
